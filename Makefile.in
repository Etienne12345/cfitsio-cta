#
# Makefile for cfitsio library:
#       libcfits.a
#
#       JDD
#       NASA GSFC
#       March, 1996
#

SHELL = /bin/sh
RANLIB=@RANLIB@
CC=@CC@

SOURCES = 	cfileio.c convert.c fitscore.c getcol.c \
		getkey.c modkey.c putcol.c putkey.c \
		utilproc.c 


stand_alone:	libcfitsio.a

libcfitsio.a:	psplit
		@mkdir split.$$$$; \
		cp ${SOURCES} split.$$$$; \
		cp *.h split.$$$$; \
		cd split.$$$$ ; \
		../psplit ${SOURCES} ; \
		echo "cfitsio: compiling split c files..."; \
		${CC} -c ${CFLAGS} tmp*.c; \
		ar rv libcfitsio.a tmp*.o; \
		${RANLIB} libcfitsio.a; \
		mv libcfitsio.a .. ;

install:        libcfitsio.a
		mv libcfitsio.a ../host/
        
clean:          
		rm -f *.o ; \
		rm -rf split.*


psplit :
		${CC} ${CFLAGS} -o psplit psplit.c

.c.o:
		${CC} ${CFLAGS} -c -o $@ $*.c
